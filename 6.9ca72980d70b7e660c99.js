(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{IAk5:function(e,t,s){"use strict";s.r(t),s.d(t,"DashboardModule",function(){return Ie});var n=s("jzak"),r=s("MHJe"),i=s("yPFk"),o=s("GQI6"),a=s("2Q0Y"),c=s("ofXK"),h=s("fXoL");const l=["*"];let u=(()=>{let e=class{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(e,t){2&e&&h.Gb("tui-island_hoverable",t.hoverable)("tui-island_transparent",t.transparent)("tui-island_size_s",t.sizeS)("tui-island_size_m",t.sizeM)("tui-island_size_l",t.sizeL)("tui-island_text-align_left",t.textAlignLeft)("tui-island_text-align_center",t.textAlignCenter)("tui-island_text-align_right",t.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:l,decls:1,vars:0,template:function(e,t){1&e&&(h.lc(),h.kc(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),Object(o.a)([Object(a.a)()],e.prototype,"size",void 0),Object(o.a)([Object(a.a)()],e.prototype,"textAlign",void 0),Object(o.a)([Object(a.a)()],e.prototype,"hoverable",void 0),Object(o.a)([Object(a.a)()],e.prototype,"transparent",void 0),e})(),d=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({imports:[[c.c]]}),e})();var p=s("YRuM");let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({imports:[[c.c,n.b]]}),e})();var f=s("tyNb"),m=s("l7P3"),g=s("LRne"),y=s("XNiG"),w=s("/uUt"),O=s("1G5W"),v=s("U8sl"),j=function(e){return e[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None",e}({});function x(e){return function(t,s){const n={ids:[...s.ids],entities:Object.assign({},s.entities)},r=e(t,n);return r===j.Both?Object.assign({},s,n):r===j.EntitiesOnly?Object.assign(Object.assign({},s),{entities:n.entities}):s}}function E(e,t){const s=t(e);return Object(h.Z)()&&void 0===s&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),s}function T(e){function t(t,s){const n=E(t,e);return n in s.entities?j.None:(s.ids.push(n),s.entities[n]=t,j.Both)}function s(e,s){let n=!1;for(const r of e)n=t(r,s)!==j.None||n;return n?j.Both:j.None}function n(e,t){const s=(e instanceof Array?e:t.ids.filter(s=>e(t.entities[s]))).filter(e=>e in t.entities).map(e=>delete t.entities[e]).length>0;return s&&(t.ids=t.ids.filter(e=>e in t.entities)),s?j.Both:j.None}function r(e,t){return i([e],t)}function i(t,s){const n={};return(t=t.filter(e=>e.id in s.entities)).length>0?t.filter(t=>function(t,s,n){const r=Object.assign({},n.entities[s.id],s.changes),i=E(r,e),o=i!==s.id;return o&&(t[s.id]=i,delete n.entities[s.id]),n.entities[i]=r,o}(n,t,s)).length>0?(s.ids=s.ids.map(e=>n[e]||e),j.Both):j.EntitiesOnly:j.None}function o(t,n){const r=[],o=[];for(const s of t){const t=E(s,e);t in n.entities?o.push({id:t,changes:s}):r.push(s)}const a=i(o,n),c=s(r,n);switch(!0){case c===j.None&&a===j.None:return j.None;case c===j.Both||a===j.Both:return j.Both;default:return j.EntitiesOnly}}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:x(t),addMany:x(s),setAll:x(function(e,t){return t.ids=[],t.entities={},s(e,t),j.Both}),setOne:x(function(t,s){const n=E(t,e);return n in s.entities?(s.entities[n]=t,j.EntitiesOnly):(s.ids.push(n),s.entities[n]=t,j.Both)}),updateOne:x(r),updateMany:x(i),upsertOne:x(function(e,t){return o([e],t)}),upsertMany:x(o),removeOne:x(function(e,t){return n([e],t)}),removeMany:x(n),map:x(function(e,t){return i(t.ids.reduce((s,n)=>{const r=e(t.entities[n]);return r!==t.entities[n]&&s.push({id:n,changes:r}),s},[]).filter(({id:e})=>e in t.entities),t)}),mapOne:x(function({map:e,id:t},s){const n=s.entities[t];return n?r({id:t,changes:e(n)},s):j.None})}}const C="cityWeathers",P=function(e={}){const{selectId:t,sortComparer:s}=Object.assign({sortComparer:!1,selectId:e=>e.id},e),n={getInitialState:function(e={}){return Object.assign({ids:[],entities:{}},e)}},r={getSelectors:function(e){const t=e=>e.ids,s=e=>e.entities,n=Object(m.q)(t,s,(e,t)=>e.map(e=>t[e])),r=Object(m.q)(t,e=>e.length);return e?{selectIds:Object(m.q)(e,t),selectEntities:Object(m.q)(e,s),selectAll:Object(m.q)(e,n),selectTotal:Object(m.q)(e,r)}:{selectIds:t,selectEntities:s,selectAll:n,selectTotal:r}}},i=s?function(e,t){const{removeOne:s,removeMany:n,removeAll:r}=T(e);function i(e,t){return o([e],t)}function o(t,s){const n=t.filter(t=>!(E(t,e)in s.entities));return 0===n.length?j.None:(l(n,s),j.Both)}function a(e,t){return c([e],t)}function c(t,s){const n=[],r=t.filter(t=>function(t,s,n){if(!(s.id in n.entities))return!1;const r=Object.assign({},n.entities[s.id],s.changes),i=E(r,e);return delete n.entities[s.id],t.push(r),i!==s.id}(n,t,s)).length>0;if(0===n.length)return j.None;{const e=s.ids,t=[];return s.ids=s.ids.filter((e,n)=>e in s.entities||(t.push(n),!1)),l(n,s),!r&&t.every(t=>s.ids[t]===e[t])?j.EntitiesOnly:j.Both}}function h(t,s){const n=[],r=[];for(const o of t){const t=E(o,e);t in s.entities?r.push({id:t,changes:o}):n.push(o)}const i=c(r,s),a=o(n,s);switch(!0){case a===j.None&&i===j.None:return j.None;case a===j.Both||i===j.Both:return j.Both;default:return j.EntitiesOnly}}function l(s,n){s.sort(t);const r=[];let i=0,o=0;for(;i<s.length&&o<n.ids.length;){const a=s[i],c=E(a,e),h=n.ids[o];t(a,n.entities[h])<=0?(r.push(c),i++):(r.push(h),o++)}n.ids=r.concat(i<s.length?s.slice(i).map(e):n.ids.slice(o)),s.forEach((t,s)=>{n.entities[e(t)]=t})}return{removeOne:s,removeMany:n,removeAll:r,addOne:x(i),updateOne:x(a),upsertOne:x(function(e,t){return h([e],t)}),setAll:x(function(e,t){return t.entities={},t.ids=[],o(e,t),j.Both}),setOne:x(function(t,s){const n=E(t,e);return n in s.entities?(s.ids=s.ids.filter(e=>e!==n),l([t],s),j.Both):i(t,s)}),addMany:x(o),updateMany:x(c),upsertMany:x(h),map:x(function(e,t){return c(t.ids.reduce((s,n)=>{const r=e(t.entities[n]);return r!==t.entities[n]&&s.push({id:n,changes:r}),s},[]),t)}),mapOne:x(function({map:e,id:t},s){const n=s.entities[t];return n?a({id:t,changes:e(n)},s):j.None})}}(t,s):T(t);return Object.assign(Object.assign(Object.assign({selectId:t,sortComparer:s},n),r),i)}({selectId:e=>e.city}),_=P.getInitialState(),N=Object(m.p)(_,Object(m.r)(v.c,(e,t)=>P.upsertOne(t.cityWeather,e)),Object(m.r)(v.g,(e,t)=>P.updateOne({id:t.city,changes:{hours:t.hours,opened:!0,loading:!1}},e)),Object(m.r)(v.e,(e,t)=>P.updateOne({id:t.city,changes:{loading:!0}},e)),Object(m.r)(v.f,(e,t)=>P.updateOne({id:t.city,changes:{loading:!1}},e))),{selectAll:A}=P.getSelectors(),k=Object(m.o)(C),z=Object(m.q)(k,(e,t)=>e.entities[t.city]),M=Object(m.q)(k,A);function S(e,t){if(1&e&&(h.Sb(0),h.Ub(1,"div",1),h.Ub(2,"p",2),h.Pb(3,"img",3),h.zc(4),h.Tb(),h.Ub(5,"p",4),h.Pb(6,"img",5),h.zc(7),h.Pb(8,"tui-svg",6),h.Tb(),h.Tb(),h.Rb()),2&e){const e=h.gc();h.Eb(3),h.mc("src",e.weather.icon,h.tc),h.Eb(1),h.Bc(" ",e.weather.temp," \u0421 \xb0 "),h.Eb(3),h.Bc(" ",e.weather.wind.speed," m/s "),h.Eb(1),h.vc("transform","rotate("+e.weather.wind.deg+"deg)")}}function I(e,t){if(1&e&&(h.Sb(0),h.Ub(1,"div",7),h.Ub(2,"div",8),h.zc(3),h.Pb(4,"img",9),h.Tb(),h.Ub(5,"div",10),h.zc(6),h.Pb(7,"tui-svg",6),h.Tb(),h.Tb(),h.Rb()),2&e){const e=h.gc();h.Eb(3),h.Bc(" ",e.weather.temp," \u0421 \xb0 "),h.Eb(1),h.mc("src",e.weather.icon,h.tc),h.Eb(2),h.Bc(" ",e.weather.wind.speed," m/s "),h.Eb(1),h.vc("transform","rotate("+e.weather.wind.deg+"deg)")}}let L=(()=>{class e{constructor(){this.size="m"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["weather-info"]],inputs:{weather:"weather",size:"size"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"info-middle"],[1,"tui-text_body-xl","tui-space_top-2","temp-m"],[1,"icon","tui-space_right-2",3,"src"],[1,"tui-text_body-xl","tui-space_top-2","wind-m"],["src","assets/wind.png",1,"icon","tui-space_right-2"],["src","tuiIconArrowUpLarge",1,"wind"],[1,"info-small","info-small_border","tui-space_top-1","tui-space_bottom-1"],[1,"tui-space_right-4","temp-s"],[1,"icon",3,"src"],[1,"wind-s"]],template:function(e,t){1&e&&(h.xc(0,S,9,5,"ng-container",0),h.xc(1,I,8,5,"ng-container",0)),2&e&&(h.mc("ngIf","m"===t.size&&t.weather),h.Eb(1),h.mc("ngIf","s"===t.size&&t.weather))},directives:[c.k,n.a],styles:[".icon[_ngcontent-%COMP%]{width:30px;height:30px;filter:invert(100%);margin-bottom:-.5rem}.info-small[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.info-small[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:right}"],changeDetection:0}),e})();function U(e,t){if(1&e&&(h.Ub(0,"div",10),h.Ub(1,"span",11),h.zc(2),h.Tb(),h.Pb(3,"weather-info",12),h.Tb()),2&e){const e=t.$implicit;h.Eb(2),h.Ac(e.time),h.Eb(1),h.mc("weather",e)}}function R(e,t){if(1&e){const e=h.Vb();h.Ub(0,"tui-island",1),h.cc("click",function(){h.rc(e);const s=t.ngIf;return h.gc().onOpenChange(s)}),h.Ub(1,"div",2),h.zc(2),h.Pb(3,"img",3),h.Tb(),h.Ub(4,"div",4),h.Pb(5,"weather-info",5),h.Ub(6,"div",6),h.Pb(7,"tui-loader",7),h.Tb(),h.Tb(),h.Ub(8,"div",8),h.xc(9,U,4,2,"div",9),h.Tb(),h.Tb()}if(2&e){const e=t.ngIf;h.Gb("pointer",!e.opened),h.Eb(2),h.Bc(" ",e.city," "),h.Eb(1),h.mc("src",e.flag,h.tc),h.Eb(2),h.mc("weather",e),h.Eb(2),h.mc("showLoader",e.loading),h.Eb(1),h.Gb("hourly-scroll_opened",e.hours.length),h.Eb(1),h.mc("ngForOf",e.hours)}}let $=(()=>{class e{constructor(e){this.store=e,this.city="",this.destroy$=new y.a}ngOnInit(){this.cityWeather$=this.store.pipe(Object(m.t)(z,{city:this.city}),Object(O.a)(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onOpenChange(e){if(!1===e.opened){const t={coord:e.coord,city:e.city};this.store.dispatch(Object(v.e)(t))}}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.h))},e.\u0275cmp=h.Ib({type:e,selectors:[["city-card"]],inputs:{city:"city"},decls:2,vars:3,consts:[[3,"pointer","click",4,"ngIf"],[3,"click"],[1,"tui-text_h5","title"],[3,"src"],[1,"weather-loader"],["size","m",3,"weather"],[1,"loader"],[3,"showLoader"],[1,"hourly-scroll"],["class","hourly-weather",4,"ngFor","ngForOf"],[1,"hourly-weather"],[1,"time"],["size","s",3,"weather"]],template:function(e,t){1&e&&(h.xc(0,R,10,9,"tui-island",0),h.hc(1,"async")),2&e&&h.mc("ngIf",h.ic(1,1,t.cityWeather$))},directives:[c.k,u,L,i.a,c.j],pipes:[c.b],styles:["[_nghost-%COMP%]{margin-bottom:20px;display:block}.time[_ngcontent-%COMP%]{font-weight:700}.hourly-weather[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid}.hourly-weather[_ngcontent-%COMP%]:last-child{border-bottom:none}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.pointer[_ngcontent-%COMP%]{cursor:pointer}.hourly-scroll[_ngcontent-%COMP%]{height:0;overflow-x:scroll;padding:10px;transition:height .5s}.hourly-scroll_opened[_ngcontent-%COMP%]{height:200px}.weather-loader[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between}.weather-loader[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   tui-loader[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:40px;height:40px}"],changeDetection:0}),e})();function F(e,t){if(1&e&&(h.Ub(0,"div",2),h.Pb(1,"city-card",3),h.Tb()),2&e){const e=t.$implicit;h.Eb(1),h.mc("city",e.city)}}const B=[{path:"",redirectTo:"cities"},{path:"cities",component:(()=>{class e{constructor(e){this.store=e,this.cities=["Bucharest","Paris","Prague","Lisbon","Dortmund"],this.cityWeathers$=Object(g.a)([]),this.destroy$=new y.a}ngOnInit(){this.store.dispatch(Object(v.d)({cities:this.cities})),this.cityWeathers$=this.store.pipe(Object(m.t)(M),Object(w.a)((e,t)=>e.length===t.length),Object(O.a)(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.h))},e.\u0275cmp=h.Ib({type:e,selectors:[["cities"]],decls:3,vars:3,consts:[[1,"tui-row","tui-row_adaptive"],["class","tui-col_xs-12 tui-col_s-6 tui-col_sm-4 tui-col_md-3 tui-col_lg-2",4,"ngFor","ngForOf"],[1,"tui-col_xs-12","tui-col_s-6","tui-col_sm-4","tui-col_md-3","tui-col_lg-2"],[3,"city"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.xc(1,F,2,1,"div",1),h.hc(2,"async"),h.Tb()),2&e&&(h.Eb(1),h.mc("ngForOf",h.ic(2,1,t.cityWeathers$)))},directives:[c.j,$],pipes:[c.b],styles:[""],changeDetection:0}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({imports:[[f.b.forChild(B)],f.b]}),e})();var W=s("HDdC"),q=s("bOdf"),D=s("pLZG"),K=s("lJxs");class Y{}class X{}class J{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const s=e.slice(0,t),n=s.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(s,n),this.headers.has(n)?this.headers.get(n).push(r):this.headers.set(n,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let s=e[t];const n=t.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(n,s),this.maybeSetNormalizedName(t,n))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof J?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new J;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof J?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(e.name,t);const n=("a"===e.op?this.headers.get(t):void 0)||[];n.push(...s),this.headers.set(t,n);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===r.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class G{encodeKey(e){return V(e)}encodeValue(e){return V(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function V(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Q{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new G,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const s=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const n=e.indexOf("="),[r,i]=-1==n?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,n)),t.decodeValue(e.slice(n+1))],o=s.get(r)||[];o.push(i),s.set(r,o)}),s}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const s=e.fromObject[t];this.map.set(t,Array.isArray(s)?s:[s])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(s=>{const n=e[s];Array.isArray(n)?n.forEach(e=>{t.push({param:s,value:e,op:"a"})}):t.push({param:s,value:n,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Q({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const s=t.indexOf(e.value);-1!==s&&t.splice(s,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function Z(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function ee(e){return"undefined"!=typeof Blob&&e instanceof Blob}function te(e){return"undefined"!=typeof FormData&&e instanceof FormData}class se{constructor(e,t,s,n){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==s?s:null,r=n):r=s,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new J),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const s=t.indexOf("?");this.urlWithParams=t+(-1===s?"?":s<t.length-1?"&":"")+e}}else this.params=new Q,this.urlWithParams=t}serializeBody(){return null===this.body?null:Z(this.body)||ee(this.body)||te(this.body)||"string"==typeof this.body?this.body:this.body instanceof Q?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||te(this.body)?null:ee(this.body)?this.body.type||null:Z(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Q?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,s=e.url||this.url,n=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,i=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,s)=>t.set(s,e.setHeaders[s]),a)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,s)=>t.set(s,e.setParams[s]),c)),new se(t,s,r,{params:c,headers:a,reportProgress:o,responseType:n,withCredentials:i})}}var ne=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class re{constructor(e,t=200,s="OK"){this.headers=e.headers||new J,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ie extends re{constructor(e={}){super(e),this.type=ne.ResponseHeader}clone(e={}){return new ie({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class oe extends re{constructor(e={}){super(e),this.type=ne.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new oe({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ae extends re{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ce(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let he=(()=>{class e{constructor(e){this.handler=e}request(e,t,s={}){let n;if(e instanceof se)n=e;else{let r,i;r=s.headers instanceof J?s.headers:new J(s.headers),s.params&&(i=s.params instanceof Q?s.params:new Q({fromObject:s.params})),n=new se(e,t,void 0!==s.body?s.body:null,{headers:r,params:i,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const r=Object(g.a)(n).pipe(Object(q.a)(e=>this.handler.handle(e)));if(e instanceof se||"events"===s.observe)return r;const i=r.pipe(Object(D.a)(e=>e instanceof oe));switch(s.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return i.pipe(Object(K.a)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return i.pipe(Object(K.a)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return i.pipe(Object(K.a)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return i.pipe(Object(K.a)(e=>e.body))}case"response":return i;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Q).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,s={}){return this.request("PATCH",e,ce(s,t))}post(e,t,s={}){return this.request("POST",e,ce(s,t))}put(e,t,s={}){return this.request("PUT",e,ce(s,t))}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(Y))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();class le{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ue=new h.t("HTTP_INTERCEPTORS");let de=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();const pe=/^\)\]\}',?\n/;class be{}let fe=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),me=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new W.a(t=>{const s=this.xhrFactory.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((e,t)=>s.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&s.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();s.responseType="json"!==t?t:"text"}const n=e.serializeBody();let r=null;const i=()=>{if(null!==r)return r;const t=1223===s.status?204:s.status,n=s.statusText||"OK",i=new J(s.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||e.url;return r=new ie({headers:i,status:t,statusText:n,url:o}),r},o=()=>{let{headers:n,status:r,statusText:o,url:a}=i(),c=null;204!==r&&(c=void 0===s.response?s.responseText:s.response),0===r&&(r=c?200:0);let h=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(pe,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,h&&(h=!1,c={error:l,text:c})}}h?(t.next(new oe({body:c,headers:n,status:r,statusText:o,url:a||void 0})),t.complete()):t.error(new ae({error:c,headers:n,status:r,statusText:o,url:a||void 0}))},a=e=>{const{url:n}=i(),r=new ae({error:e,status:s.status||0,statusText:s.statusText||"Unknown Error",url:n||void 0});t.error(r)};let c=!1;const h=n=>{c||(t.next(i()),c=!0);let r={type:ne.DownloadProgress,loaded:n.loaded};n.lengthComputable&&(r.total=n.total),"text"===e.responseType&&s.responseText&&(r.partialText=s.responseText),t.next(r)},l=e=>{let s={type:ne.UploadProgress,loaded:e.loaded};e.lengthComputable&&(s.total=e.total),t.next(s)};return s.addEventListener("load",o),s.addEventListener("error",a),s.addEventListener("timeout",a),s.addEventListener("abort",a),e.reportProgress&&(s.addEventListener("progress",h),null!==n&&s.upload&&s.upload.addEventListener("progress",l)),s.send(n),t.next({type:ne.Sent}),()=>{s.removeEventListener("error",a),s.removeEventListener("abort",a),s.removeEventListener("load",o),s.removeEventListener("timeout",a),e.reportProgress&&(s.removeEventListener("progress",h),null!==n&&s.upload&&s.upload.removeEventListener("progress",l)),s.readyState!==s.DONE&&s.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(be))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();const ge=new h.t("XSRF_COOKIE_NAME"),ye=new h.t("XSRF_HEADER_NAME");class we{}let Oe=(()=>{class e{constructor(e,t,s){this.doc=e,this.platform=t,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.t)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(c.d),h.Yb(h.E),h.Yb(ge))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),ve=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const s=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||s.startsWith("http://")||s.startsWith("https://"))return t.handle(e);const n=this.tokenService.getToken();return null===n||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,n)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(we),h.Yb(ye))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),je=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(ue,[]);this.chain=e.reduceRight((e,t)=>new le(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(X),h.Yb(h.u))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),xe=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:ve,useClass:de}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:ge,useValue:t.cookieName}:[],t.headerName?{provide:ye,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[ve,{provide:ue,useExisting:ve,multi:!0},{provide:we,useClass:Oe},{provide:ge,useValue:"XSRF-TOKEN"},{provide:ye,useValue:"X-XSRF-TOKEN"}]}),e})(),Ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[he,{provide:Y,useClass:je},me,{provide:X,useExisting:me},fe,{provide:be,useExisting:fe}],imports:[[xe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();var Te=s("AytR");class Ce{constructor(e){this.loading=!1,this.temp=Ce.getAvgTemp(e.main),this.icon=Ce.getIcon(e.weather[0].icon),this.wind={speed:Math.round(e.wind.speed),deg:e.wind.deg},this.flag=Ce.getFlag(e.sys.country),this.city=e.name,this.coord=Object.assign({},e.coord),this.hours=[],this.opened=!1}static getTempWithSign(e){return`${e>0?"+":e<0?"-":""}${Math.round(e)}`}static getIcon(e){return e?`/assets/${e}.png`:"/assets/unknown.png"}static getAvgTemp({temp:e,feels_like:t,temp_max:s,temp_min:n}){return Ce.getTempWithSign((e+t+n+s)/4)}static getFlag(e){return`https://www.countryflags.io/${e.toLocaleLowerCase()}/flat/24.png`}}class Pe{constructor(e){this.time="",this.timestamp="",this.temp="",this.icon="",this.wind={deg:0,speed:10},this.temp=Ce.getTempWithSign(e.temp);const t=new Date(1e3*e.dt).getHours();this.time=t%12+" "+(t>=12?"PM":"AM"),this.icon=Ce.getIcon(e.weather[0].icon),this.wind={deg:e.wind_deg,speed:Math.round(e.wind_speed)},this.timestamp=String(e.dt)}}let _e=(()=>{class e{constructor(e){this.http=e,this.baseUri=`${Te.a.api}data/2.5`,this.units="metric"}getCityWeather(e){const t=this.getCityWeatherParams(e);return this.http.get(`${this.baseUri}/weather`,{params:t}).pipe(Object(K.a)(e=>new Ce(e)))}getWeatherHours(e){const t=this.getWeatherHoursParams(e),s=Number(new Date);return this.http.get(`${this.baseUri}/onecall`,{params:t}).pipe(Object(K.a)(e=>e.hourly.filter(e=>s<1e3*e.dt).splice(0,12).map(e=>new Pe(e))))}getWeatherHoursParams(e){const t={lat:String(e.lat),lon:String(e.lon)};return new Q({fromObject:Object.assign({exclude:"current,minutely,daily,alerts",appid:Te.a.appid,units:this.units},t)})}getCityWeatherParams(e){return new Q({fromObject:{q:e,units:this.units,appid:Te.a.appid}})}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(he))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();var Ne=s("9jGm"),Ae=s("JIr8"),ke=s("eIep");let ze=(()=>{class e{constructor(e,t){this.actions$=e,this.weatherService=t,this.getCityWeather$=this.getCityWeatherFn$(),this.getCityWeathers$=this.getCityWeathersFn$(),this.getWeatherHours$=this.getWeatherHoursFn$()}getCityWeatherFn$(){return Object(Ne.c)(()=>this.actions$.pipe(Object(Ne.d)(v.a),Object(q.a)(({city:e})=>this.weatherService.getCityWeather(e).pipe(Object(K.a)(e=>Object(v.c)({cityWeather:e})),Object(Ae.a)(t=>[Object(v.b)({city:e,error:t})])))))}getCityWeathersFn$(){return Object(Ne.c)(()=>this.actions$.pipe(Object(Ne.d)(v.d),Object(ke.a)(({cities:e})=>e.map(e=>Object(v.a)({city:e})))))}getWeatherHoursFn$(){return Object(Ne.c)(()=>this.actions$.pipe(Object(Ne.d)(v.e),Object(ke.a)(({coord:e,city:t})=>this.weatherService.getWeatherHours(e).pipe(Object(K.a)(e=>Object(v.g)({hours:e,city:t})),Object(Ae.a)(e=>[Object(v.f)({error:e,city:t})])))))}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(Ne.a),h.Yb(_e))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({imports:[[m.j.forFeature(C,N),Ne.b.forFeature([ze])]]}),e})();const Se=[d,n.b,r.b,i.b];let Ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[_e],imports:[[p.a,H,Ee,Se,b,Me]]}),e})()}}]);